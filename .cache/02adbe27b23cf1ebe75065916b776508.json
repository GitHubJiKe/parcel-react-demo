{"dependencies":[{"name":"react","loc":{"line":7,"column":18}},{"name":"react-dom","loc":{"line":8,"column":21}},{"name":"prop-types","loc":{"line":9,"column":22}},{"name":"classnames","loc":{"line":10,"column":23}},{"name":"rc-util/es/KeyCode","loc":{"line":11,"column":20}},{"name":"./util","loc":{"line":12,"column":30}},{"name":"./Star","loc":{"line":13,"column":17}}],"generated":{"js":"\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function o(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!==(void 0===t?\"undefined\":r(t))&&\"function\"!=typeof t?e:t}function n(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===t?\"undefined\":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){}Object.defineProperty(exports,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},u=require(\"react\"),l=e(u),s=require(\"react-dom\"),i=e(s),f=require(\"prop-types\"),c=e(f),p=require(\"classnames\"),d=e(p),h=require(\"rc-util/es/KeyCode\"),v=e(h),y=require(\"./util\"),b=require(\"./Star\"),g=e(b),m=function(e){function a(n){t(this,a);var r=o(this,e.call(this,n));S.call(r);var u=n.value;return void 0===u&&(u=n.defaultValue),r.stars={},r.state={value:u,focused:!1},r}return n(a,e),a.prototype.componentDidMount=function(){this.props.autoFocus&&!this.props.disabled&&this.focus()},a.prototype.componentWillReceiveProps=function(e){if(\"value\"in e){var t=e.value;void 0===t&&(t=e.defaultValue),this.setState({value:t})}},a.prototype.getStarDOM=function(e){return i.default.findDOMNode(this.stars[e])},a.prototype.getStarValue=function(e,t){var o=e+1;if(this.props.allowHalf){var n=(0,y.getOffsetLeft)(this.getStarDOM(0)),a=(0,y.getOffsetLeft)(this.getStarDOM(1))-n;t-n-a*e<a/2&&(o-=.5)}return o},a.prototype.focus=function(){this.props.disabled||this.rate.focus()},a.prototype.blur=function(){this.props.disabled||this.rate.focus()},a.prototype.changeValue=function(e){\"value\"in this.props||this.setState({value:e}),this.props.onChange(e)},a.prototype.render=function(){for(var e=this.props,t=e.count,o=e.allowHalf,n=e.style,a=e.prefixCls,r=e.disabled,u=e.className,s=e.character,i=e.tabIndex,f=this.state,c=f.value,p=f.hoverValue,h=f.focused,v=[],y=r?a+\"-disabled\":\"\",b=0;b<t;b++)v.push(l.default.createElement(g.default,{ref:this.saveRef(b),index:b,disabled:r,prefixCls:a+\"-star\",allowHalf:o,value:void 0===p?c:p,onClick:this.onClick,onHover:this.onHover,key:b,character:s,focused:h}));return l.default.createElement(\"ul\",{className:(0,d.default)(a,y,u),style:n,onMouseLeave:r?null:this.onMouseLeave,tabIndex:r?-1:i,onFocus:r?null:this.onFocus,onBlur:r?null:this.onBlur,onKeyDown:r?null:this.onKeyDown,ref:this.saveRate},v)},a}(l.default.Component);m.propTypes={disabled:c.default.bool,value:c.default.number,defaultValue:c.default.number,count:c.default.number,allowHalf:c.default.bool,style:c.default.object,prefixCls:c.default.string,onChange:c.default.func,onHoverChange:c.default.func,className:c.default.string,character:c.default.node,tabIndex:c.default.number,onFocus:c.default.func,onBlur:c.default.func,onKeyDown:c.default.func,autoFocus:c.default.bool},m.defaultProps={defaultValue:0,count:5,allowHalf:!1,style:{},prefixCls:\"rc-rate\",onChange:a,character:\"â˜…\",onHoverChange:a,tabIndex:0};var S=function(){var e=this;this.onHover=function(t,o){var n=e.getStarValue(o,t.pageX);e.setState({hoverValue:n}),e.props.onHoverChange(n)},this.onMouseLeave=function(){e.setState({hoverValue:void 0}),e.props.onHoverChange(void 0)},this.onClick=function(t,o){var n=e.getStarValue(o,t.pageX);e.onMouseLeave(),e.changeValue(n)},this.onFocus=function(){var t=e.props.onFocus;e.setState({focused:!0}),t&&t()},this.onBlur=function(){var t=e.props.onBlur;e.setState({focused:!1}),t&&t()},this.onKeyDown=function(t){var o=t.keyCode,n=e.props,a=n.count,r=n.allowHalf,u=n.onKeyDown,l=e.state.value;o===v.default.RIGHT&&l<a?(l+=r?.5:1,e.changeValue(l),t.preventDefault()):o===v.default.LEFT&&l>0&&(l-=r?.5:1,e.changeValue(l),t.preventDefault()),u&&u(t)},this.saveRef=function(t){return function(o){e.stars[t]=o}},this.saveRate=function(t){e.rate=t}};exports.default=m;"},"hash":"ed395d5834e42477138306e560e549d4"}