{"dependencies":[{"name":"babel-runtime/helpers/defineProperty","loc":{"line":1,"column":28}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":2,"column":28}},{"name":"babel-runtime/helpers/createClass","loc":{"line":3,"column":25}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":4,"column":39}},{"name":"babel-runtime/helpers/inherits","loc":{"line":5,"column":22}},{"name":"react","loc":{"line":6,"column":23}},{"name":"react-dom","loc":{"line":7,"column":26}},{"name":"rc-menu","loc":{"line":8,"column":48}},{"name":"dom-closest","loc":{"line":9,"column":20}},{"name":"classnames","loc":{"line":10,"column":23}},{"name":"../dropdown","loc":{"line":11,"column":21}},{"name":"../icon","loc":{"line":12,"column":17}},{"name":"../checkbox","loc":{"line":13,"column":21}},{"name":"../radio","loc":{"line":14,"column":18}},{"name":"./FilterDropdownMenuWrapper","loc":{"line":15,"column":38}}],"generated":{"js":"\"use strict\";function e(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var r=require(\"babel-runtime/helpers/defineProperty\"),l=t(r),n=require(\"babel-runtime/helpers/classCallCheck\"),i=t(n),s=require(\"babel-runtime/helpers/createClass\"),o=t(s),a=require(\"babel-runtime/helpers/possibleConstructorReturn\"),u=t(a),c=require(\"babel-runtime/helpers/inherits\"),d=t(c),f=require(\"react\"),h=e(f),p=require(\"react-dom\"),m=e(p),y=require(\"rc-menu\"),v=t(y),b=require(\"dom-closest\"),k=t(b),C=require(\"classnames\"),w=t(C),S=require(\"../dropdown\"),K=t(S),M=require(\"../icon\"),g=t(M),O=require(\"../checkbox\"),P=t(O),q=require(\"../radio\"),x=t(q),E=require(\"./FilterDropdownMenuWrapper\"),D=t(E),N=function(e){function t(e){(0,i.default)(this,t);var r=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setNeverShown=function(e){var t=m.findDOMNode(r);!!(0,k.default)(t,\".ant-table-scroll\")&&(r.neverShown=!!e.fixed)},r.setSelectedKeys=function(e){var t=e.selectedKeys;r.setState({selectedKeys:t})},r.handleClearFilters=function(){r.setState({selectedKeys:[]},r.handleConfirm)},r.handleConfirm=function(){r.setVisible(!1),r.confirmFilter()},r.onVisibleChange=function(e){r.setVisible(e),e||r.confirmFilter()},r.handleMenuItemClick=function(e){if(!(e.keyPath.length<=1)){var t=r.state.keyPathOfSelectedItem;r.state.selectedKeys.indexOf(e.key)>=0?delete t[e.key]:t[e.key]=e.keyPath,r.setState({keyPathOfSelectedItem:t})}},r.renderFilterIcon=function(){var e=r.props,t=e.column,n=e.locale,i=e.prefixCls,s=t.filterIcon,o=r.props.selectedKeys.length>0?i+\"-selected\":\"\";return s?h.cloneElement(s,{title:n.filterTitle,className:(0,w.default)(s.className,(0,l.default)({},i+\"-icon\",!0))}):h.createElement(g.default,{title:n.filterTitle,type:\"filter\",className:o})};var n=\"filterDropdownVisible\"in e.column&&e.column.filterDropdownVisible;return r.state={selectedKeys:e.selectedKeys,keyPathOfSelectedItem:{},visible:n},r}return(0,d.default)(t,e),(0,o.default)(t,[{key:\"componentDidMount\",value:function(){var e=this.props.column;this.setNeverShown(e)}},{key:\"componentWillReceiveProps\",value:function(e){var t=e.column;this.setNeverShown(t);var r={};\"selectedKeys\"in e&&(r.selectedKeys=e.selectedKeys),\"filterDropdownVisible\"in t&&(r.visible=t.filterDropdownVisible),Object.keys(r).length>0&&this.setState(r)}},{key:\"setVisible\",value:function(e){var t=this.props.column;\"filterDropdownVisible\"in t||this.setState({visible:e}),t.onFilterDropdownVisibleChange&&t.onFilterDropdownVisibleChange(e)}},{key:\"confirmFilter\",value:function(){this.state.selectedKeys!==this.props.selectedKeys&&this.props.confirmFilter(this.props.column,this.state.selectedKeys)}},{key:\"renderMenuItem\",value:function(e){var t=this.props.column,r=!(\"filterMultiple\"in t)||t.filterMultiple?h.createElement(P.default,{checked:this.state.selectedKeys.indexOf(e.value.toString())>=0}):h.createElement(x.default,{checked:this.state.selectedKeys.indexOf(e.value.toString())>=0});return h.createElement(y.Item,{key:e.value},r,h.createElement(\"span\",null,e.text))}},{key:\"hasSubMenu\",value:function(){var e=this.props.column.filters;return(void 0===e?[]:e).some(function(e){return!!(e.children&&e.children.length>0)})}},{key:\"renderMenus\",value:function(e){var t=this;return e.map(function(e){if(e.children&&e.children.length>0){var r=t.state.keyPathOfSelectedItem,l=Object.keys(r).some(function(t){return r[t].indexOf(e.value)>=0})?t.props.dropdownPrefixCls+\"-submenu-contain-selected\":\"\";return h.createElement(y.SubMenu,{title:e.text,className:l,key:e.value.toString()},t.renderMenus(e.children))}return t.renderMenuItem(e)})}},{key:\"render\",value:function(){var e=this.props,t=e.column,r=e.locale,n=e.prefixCls,i=e.dropdownPrefixCls,s=e.getPopupContainer,o=!(\"filterMultiple\"in t)||t.filterMultiple,a=(0,w.default)((0,l.default)({},i+\"-menu-without-submenu\",!this.hasSubMenu())),u=t.filterDropdown?h.createElement(D.default,null,t.filterDropdown):h.createElement(D.default,{className:n+\"-dropdown\"},h.createElement(v.default,{multiple:o,onClick:this.handleMenuItemClick,prefixCls:i+\"-menu\",className:a,onSelect:this.setSelectedKeys,onDeselect:this.setSelectedKeys,selectedKeys:this.state.selectedKeys},this.renderMenus(t.filters)),h.createElement(\"div\",{className:n+\"-dropdown-btns\"},h.createElement(\"a\",{className:n+\"-dropdown-link confirm\",onClick:this.handleConfirm},r.filterConfirm),h.createElement(\"a\",{className:n+\"-dropdown-link clear\",onClick:this.handleClearFilters},r.filterReset)));return h.createElement(K.default,{trigger:[\"click\"],overlay:u,visible:!this.neverShown&&this.state.visible,onVisibleChange:this.onVisibleChange,getPopupContainer:s,forceRender:!0},this.renderFilterIcon())}}]),t}(h.Component);exports.default=N,N.defaultProps={handleFilter:function(){},column:{}};"},"hash":"d68e7e59689ca6dd9f96916b7f6c08c7"}