{"dependencies":[{"name":"react","loc":{"line":11,"column":47}},{"name":"prop-types","loc":{"line":12,"column":22}},{"name":"rc-trigger","loc":{"line":13,"column":20}},{"name":"./Menus","loc":{"line":14,"column":18}},{"name":"rc-util/es/KeyCode","loc":{"line":15,"column":20}},{"name":"array-tree-filter","loc":{"line":16,"column":28}},{"name":"shallow-equal/arrays","loc":{"line":17,"column":31}}],"generated":{"js":"\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function n(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!==(void 0===t?\"undefined\":i(t))&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===t?\"undefined\":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,\"__esModule\",{value:!0});var i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},l=require(\"react\"),u=e(l),r=require(\"prop-types\"),p=e(r),s=require(\"rc-trigger\"),d=e(s),f=require(\"./Menus\"),c=e(f),v=require(\"rc-util/es/KeyCode\"),h=e(v),b=require(\"array-tree-filter\"),y=e(b),g=require(\"shallow-equal/arrays\"),C=e(g),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},V={bottomLeft:{points:[\"tl\",\"bl\"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:[\"bl\",\"tl\"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:[\"tr\",\"br\"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topRight:{points:[\"br\",\"tr\"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}}},P=function(e){function i(t){o(this,i);var a=n(this,e.call(this,t));a.setPopupVisible=function(e){\"popupVisible\"in a.props||a.setState({popupVisible:e}),e&&!a.state.visible&&a.setState({activeValue:a.state.value}),a.props.onPopupVisibleChange(e)},a.handleChange=function(e,t,o){\"keydown\"===o.type&&o.keyCode!==h.default.ENTER||(a.props.onChange(e.map(function(e){return e.value}),e),a.setPopupVisible(t.visible))},a.handlePopupVisibleChange=function(e){a.setPopupVisible(e)},a.handleMenuSelect=function(e,t,o){o&&o.preventDefault&&o.preventDefault();var n=a.trigger.getRootDomNode();n&&n.focus&&n.focus();var i=a.props,l=i.changeOnSelect,u=i.loadData,r=i.expandTrigger;if(e&&!e.disabled){var p=a.state.activeValue;(p=p.slice(0,t+1))[t]=e.value;var s=a.getActiveOptions(p);if(!1===e.isLeaf&&!e.children&&u)return l&&a.handleChange(s,{visible:!0},o),a.setState({activeValue:p}),void u(s);var d={};e.children&&e.children.length?!l||\"click\"!==o.type&&\"keydown\"!==o.type||(\"hover\"===r?a.handleChange(s,{visible:!1},o):a.handleChange(s,{visible:!0},o),d.value=p):(a.handleChange(s,{visible:!1},o),d.value=p),d.activeValue=p,(\"value\"in a.props||\"keydown\"===o.type&&o.keyCode!==h.default.ENTER)&&delete d.value,a.setState(d)}},a.handleKeyDown=function(e){var t=a.props.children;if(t&&t.props.onKeyDown)t.props.onKeyDown(e);else{var o=[].concat(a.state.activeValue),n=o.length-1<0?0:o.length-1,i=a.getCurrentLevelOptions(),l=i.map(function(e){return e.value}).indexOf(o[n]);if(e.keyCode===h.default.DOWN||e.keyCode===h.default.UP||e.keyCode===h.default.LEFT||e.keyCode===h.default.RIGHT||e.keyCode===h.default.ENTER||e.keyCode===h.default.BACKSPACE||e.keyCode===h.default.ESC)if(a.state.popupVisible||e.keyCode===h.default.BACKSPACE||e.keyCode===h.default.ESC){if(e.keyCode===h.default.DOWN||e.keyCode===h.default.UP){var u=l;u=-1!==u?e.keyCode===h.default.DOWN?(u+=1)>=i.length?0:u:(u-=1)<0?i.length-1:u:0,o[n]=i[u].value}else if(e.keyCode===h.default.LEFT||e.keyCode===h.default.BACKSPACE)o.splice(o.length-1,1);else if(e.keyCode===h.default.RIGHT)i[l]&&i[l].children&&o.push(i[l].children[0].value);else if(e.keyCode===h.default.ESC)return void a.setPopupVisible(!1);o&&0!==o.length||a.setPopupVisible(!1);var r=a.getActiveOptions(o),p=r[r.length-1];a.handleMenuSelect(p,r.length-1,e),a.props.onKeyDown&&a.props.onKeyDown(e)}else a.setPopupVisible(!0)}},a.saveTrigger=function(e){a.trigger=e};var l=[];return\"value\"in t?l=t.value||[]:\"defaultValue\"in t&&(l=t.defaultValue||[]),a.state={popupVisible:t.popupVisible,activeValue:l,value:l},a}return a(i,e),i.prototype.componentWillReceiveProps=function(e){if(\"value\"in e&&!(0,C.default)(this.props.value,e.value)){var t={value:e.value||[],activeValue:e.value||[]};\"loadData\"in e&&delete t.activeValue,this.setState(t)}\"popupVisible\"in e&&this.setState({popupVisible:e.popupVisible})},i.prototype.getPopupDOMNode=function(){return this.trigger.getPopupDomNode()},i.prototype.getCurrentLevelOptions=function(){var e=this.props.options,t=this.state.activeValue,o=void 0===t?[]:t,n=(0,y.default)(e,function(e,t){return e.value===o[t]});return n[n.length-2]?n[n.length-2].children:[].concat(e).filter(function(e){return!e.disabled})},i.prototype.getActiveOptions=function(e){return(0,y.default)(this.props.options,function(t,o){return t.value===e[o]})},i.prototype.render=function(){var e=this.props,o=e.prefixCls,n=e.transitionName,a=e.popupClassName,i=e.options,r=e.disabled,p=e.builtinPlacements,s=e.popupPlacement,f=e.children,v=t(e,[\"prefixCls\",\"transitionName\",\"popupClassName\",\"options\",\"disabled\",\"builtinPlacements\",\"popupPlacement\",\"children\"]),h=u.default.createElement(\"div\",null),b=\"\";return i&&i.length>0?h=u.default.createElement(c.default,m({},this.props,{value:this.state.value,activeValue:this.state.activeValue,onSelect:this.handleMenuSelect,visible:this.state.popupVisible})):b=\" \"+o+\"-menus-empty\",u.default.createElement(d.default,m({ref:this.saveTrigger},v,{options:i,disabled:r,popupPlacement:s,builtinPlacements:p,popupTransitionName:n,action:r?[]:[\"click\"],popupVisible:!r&&this.state.popupVisible,onPopupVisibleChange:this.handlePopupVisibleChange,prefixCls:o+\"-menus\",popupClassName:a+b,popup:h}),(0,l.cloneElement)(f,{onKeyDown:this.handleKeyDown,tabIndex:r?void 0:0}))},i}(l.Component);P.defaultProps={options:[],onChange:function(){},onPopupVisibleChange:function(){},disabled:!1,transitionName:\"\",prefixCls:\"rc-cascader\",popupClassName:\"\",popupPlacement:\"bottomLeft\",builtinPlacements:V,expandTrigger:\"click\"},P.propTypes={value:p.default.array,defaultValue:p.default.array,options:p.default.array.isRequired,onChange:p.default.func,onPopupVisibleChange:p.default.func,popupVisible:p.default.bool,disabled:p.default.bool,transitionName:p.default.string,popupClassName:p.default.string,popupPlacement:p.default.string,prefixCls:p.default.string,dropdownMenuColumnStyle:p.default.object,builtinPlacements:p.default.object,loadData:p.default.func,changeOnSelect:p.default.bool,children:p.default.node,onKeyDown:p.default.func,expandTrigger:p.default.string},exports.default=P;"},"hash":"ce3f4c852d11bc9253e3d772cb7dd700"}