{"dependencies":[{"name":"babel-runtime/helpers/extends","loc":{"line":1,"column":21}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":2,"column":28}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":3,"column":39}},{"name":"babel-runtime/helpers/inherits","loc":{"line":4,"column":22}},{"name":"react","loc":{"line":5,"column":18}},{"name":"prop-types","loc":{"line":6,"column":22}},{"name":"./utils","loc":{"line":7,"column":38}},{"name":"shallowequal","loc":{"line":8,"column":25}},{"name":"rc-util/es/Dom/addEventListener","loc":{"line":9,"column":29}},{"name":"mini-store","loc":{"line":10,"column":33}},{"name":"lodash.merge","loc":{"line":11,"column":18}},{"name":"./ColumnManager","loc":{"line":12,"column":26}},{"name":"component-classes","loc":{"line":13,"column":20}},{"name":"./HeadTable","loc":{"line":14,"column":22}},{"name":"./BodyTable","loc":{"line":15,"column":22}},{"name":"./ExpandableTable","loc":{"line":16,"column":28}}],"generated":{"js":"\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var t=require(\"babel-runtime/helpers/extends\"),o=e(t),l=require(\"babel-runtime/helpers/classCallCheck\"),r=e(l),n=require(\"babel-runtime/helpers/possibleConstructorReturn\"),i=e(n),a=require(\"babel-runtime/helpers/inherits\"),s=e(a),d=require(\"react\"),u=e(d),c=require(\"prop-types\"),f=e(c),p=require(\"./utils\"),h=require(\"shallowequal\"),y=e(h),m=require(\"rc-util/es/Dom/addEventListener\"),b=e(m),g=require(\"mini-store\"),w=require(\"lodash.merge\"),x=e(w),v=require(\"./ColumnManager\"),R=e(v),C=require(\"component-classes\"),T=e(C),S=require(\"./HeadTable\"),E=e(S),M=require(\"./BodyTable\"),B=e(M),L=require(\"./ExpandableTable\"),N=e(L),q=function(e){function t(o){(0,r.default)(this,t);var l=(0,i.default)(this,e.call(this,o));return l.getRowKey=function(e,t){var o=l.props.rowKey,r=\"function\"==typeof o?o(e,t):e[o];return(0,p.warningOnce)(void 0!==r,\"Each record in table should have a unique `key` prop,or set `rowKey` to an unique primary key.\"),void 0===r?t:r},l.handleWindowResize=function(){l.syncFixedTableRowHeight(),l.setScrollPositionClassName()},l.syncFixedTableRowHeight=function(){var e=l.tableNode.getBoundingClientRect();if(!(void 0!==e.height&&e.height<=0)){var t=l.props.prefixCls,o=l.headTable?l.headTable.querySelectorAll(\"thead\"):l.bodyTable.querySelectorAll(\"thead\"),r=l.bodyTable.querySelectorAll(\".\"+t+\"-row\")||[],n=[].map.call(o,function(e){return e.getBoundingClientRect().height||\"auto\"}),i=[].map.call(r,function(e){return e.getBoundingClientRect().height||\"auto\"}),a=l.store.getState();(0,y.default)(a.fixedColumnsHeadRowsHeight,n)&&(0,y.default)(a.fixedColumnsBodyRowsHeight,i)||l.store.setState({fixedColumnsHeadRowsHeight:n,fixedColumnsBodyRowsHeight:i})}},l.handleBodyScrollLeft=function(e){if(e.currentTarget===e.target){var t=e.target,o=l.props.scroll,r=void 0===o?{}:o,n=l.headTable,i=l.bodyTable;t.scrollLeft!==l.lastScrollLeft&&r.x&&(t===i&&n?n.scrollLeft=t.scrollLeft:t===n&&i&&(i.scrollLeft=t.scrollLeft),l.setScrollPositionClassName()),l.lastScrollLeft=t.scrollLeft}},l.handleBodyScrollTop=function(e){var t=e.target,o=l.props.scroll,r=void 0===o?{}:o,n=l.headTable,i=l.bodyTable,a=l.fixedColumnsBodyLeft,s=l.fixedColumnsBodyRight;if(t.scrollTop!==l.lastScrollTop&&r.y&&t!==n){var d=t.scrollTop;a&&t!==a&&(a.scrollTop=d),s&&t!==s&&(s.scrollTop=d),i&&t!==i&&(i.scrollTop=d)}l.lastScrollTop=t.scrollTop},l.handleBodyScroll=function(e){l.handleBodyScrollLeft(e),l.handleBodyScrollTop(e)},l.saveRef=function(e){return function(t){l[e]=t}},[\"onRowClick\",\"onRowDoubleClick\",\"onRowContextMenu\",\"onRowMouseEnter\",\"onRowMouseLeave\"].forEach(function(e){(0,p.warningOnce)(void 0===o[e],e+\" is deprecated, please use onRow instead.\")}),(0,p.warningOnce)(void 0===o.getBodyWrapper,\"getBodyWrapper is deprecated, please use custom components instead.\"),l.columnManager=new R.default(o.columns,o.children),l.store=(0,g.create)({currentHoverKey:null,fixedColumnsHeadRowsHeight:[],fixedColumnsBodyRowsHeight:[]}),l.setScrollPosition(\"left\"),l.debouncedWindowResize=(0,p.debounce)(l.handleWindowResize,150),l}return(0,s.default)(t,e),t.prototype.getChildContext=function(){return{table:{props:this.props,columnManager:this.columnManager,saveRef:this.saveRef,components:(0,x.default)({table:\"table\",header:{wrapper:\"thead\",row:\"tr\",cell:\"th\"},body:{wrapper:\"tbody\",row:\"tr\",cell:\"td\"}},this.props.components)}}},t.prototype.componentDidMount=function(){this.columnManager.isAnyColumnsFixed()&&(this.handleWindowResize(),this.resizeEvent=(0,b.default)(window,\"resize\",this.debouncedWindowResize))},t.prototype.componentWillReceiveProps=function(e){e.columns&&e.columns!==this.props.columns?this.columnManager.reset(e.columns):e.children!==this.props.children&&this.columnManager.reset(null,e.children)},t.prototype.componentDidUpdate=function(e){this.columnManager.isAnyColumnsFixed()&&(this.handleWindowResize(),this.resizeEvent||(this.resizeEvent=(0,b.default)(window,\"resize\",this.debouncedWindowResize))),e.data.length>0&&0===this.props.data.length&&this.hasScrollX()&&this.resetScrollX()},t.prototype.componentWillUnmount=function(){this.resizeEvent&&this.resizeEvent.remove(),this.debouncedWindowResize&&this.debouncedWindowResize.cancel()},t.prototype.setScrollPosition=function(e){if(this.scrollPosition=e,this.tableNode){var t=this.props.prefixCls;\"both\"===e?(0,T.default)(this.tableNode).remove(new RegExp(\"^\"+t+\"-scroll-position-.+$\")).add(t+\"-scroll-position-left\").add(t+\"-scroll-position-right\"):(0,T.default)(this.tableNode).remove(new RegExp(\"^\"+t+\"-scroll-position-.+$\")).add(t+\"-scroll-position-\"+e)}},t.prototype.setScrollPositionClassName=function(){var e=this.bodyTable,t=0===e.scrollLeft,o=e.scrollLeft+1>=e.children[0].getBoundingClientRect().width-e.getBoundingClientRect().width;t&&o?this.setScrollPosition(\"both\"):t?this.setScrollPosition(\"left\"):o?this.setScrollPosition(\"right\"):\"middle\"!==this.scrollPosition&&this.setScrollPosition(\"middle\")},t.prototype.resetScrollX=function(){this.headTable&&(this.headTable.scrollLeft=0),this.bodyTable&&(this.bodyTable.scrollLeft=0)},t.prototype.hasScrollX=function(){var e=this.props.scroll;return\"x\"in(void 0===e?{}:e)},t.prototype.renderMainTable=function(){var e=this.props,t=e.scroll,o=e.prefixCls,l=this.columnManager.isAnyColumnsFixed()||t.x||t.y,r=[this.renderTable({columns:this.columnManager.groupedColumns()}),this.renderEmptyText(),this.renderFooter()];return l?u.default.createElement(\"div\",{className:o+\"-scroll\"},r):r},t.prototype.renderLeftFixedTable=function(){var e=this.props.prefixCls;return u.default.createElement(\"div\",{className:e+\"-fixed-left\"},this.renderTable({columns:this.columnManager.leftColumns(),fixed:\"left\"}))},t.prototype.renderRightFixedTable=function(){var e=this.props.prefixCls;return u.default.createElement(\"div\",{className:e+\"-fixed-right\"},this.renderTable({columns:this.columnManager.rightColumns(),fixed:\"right\"}))},t.prototype.renderTable=function(e){var t=e.columns,o=e.fixed,l=this.props,r=l.prefixCls,n=l.scroll,i=(void 0===n?{}:n).x||o?r+\"-fixed\":\"\";return[u.default.createElement(E.default,{key:\"head\",columns:t,fixed:o,tableClassName:i,handleBodyScrollLeft:this.handleBodyScrollLeft,expander:this.expander}),u.default.createElement(B.default,{key:\"body\",columns:t,fixed:o,tableClassName:i,getRowKey:this.getRowKey,handleBodyScroll:this.handleBodyScroll,expander:this.expander})]},t.prototype.renderTitle=function(){var e=this.props,t=e.title,o=e.prefixCls;return t?u.default.createElement(\"div\",{className:o+\"-title\",key:\"title\"},t(this.props.data)):null},t.prototype.renderFooter=function(){var e=this.props,t=e.footer,o=e.prefixCls;return t?u.default.createElement(\"div\",{className:o+\"-footer\",key:\"footer\"},t(this.props.data)):null},t.prototype.renderEmptyText=function(){var e=this.props,t=e.emptyText,o=e.prefixCls;if(e.data.length)return null;var l=o+\"-placeholder\";return u.default.createElement(\"div\",{className:l,key:\"emptyText\"},\"function\"==typeof t?t():t)},t.prototype.render=function(){var e=this,t=this.props,l=t.prefixCls,r=t.prefixCls;t.className&&(r+=\" \"+t.className),(t.useFixedHeader||t.scroll&&t.scroll.y)&&(r+=\" \"+l+\"-fixed-header\"),\"both\"===this.scrollPosition?r+=\" \"+l+\"-scroll-position-left \"+l+\"-scroll-position-right\":r+=\" \"+l+\"-scroll-position-\"+this.scrollPosition;var n=this.columnManager.isAnyColumnsLeftFixed(),i=this.columnManager.isAnyColumnsRightFixed();return u.default.createElement(g.Provider,{store:this.store},u.default.createElement(N.default,(0,o.default)({},t,{columnManager:this.columnManager,getRowKey:this.getRowKey}),function(o){return e.expander=o,u.default.createElement(\"div\",{ref:e.saveRef(\"tableNode\"),className:r,style:t.style},e.renderTitle(),u.default.createElement(\"div\",{className:l+\"-content\"},e.renderMainTable(),n&&e.renderLeftFixedTable(),i&&e.renderRightFixedTable()))}))},t}(u.default.Component);q.propTypes=(0,o.default)({data:f.default.array,useFixedHeader:f.default.bool,columns:f.default.array,prefixCls:f.default.string,bodyStyle:f.default.object,style:f.default.object,rowKey:f.default.oneOfType([f.default.string,f.default.func]),rowClassName:f.default.oneOfType([f.default.string,f.default.func]),onRow:f.default.func,onHeaderRow:f.default.func,onRowClick:f.default.func,onRowDoubleClick:f.default.func,onRowContextMenu:f.default.func,onRowMouseEnter:f.default.func,onRowMouseLeave:f.default.func,showHeader:f.default.bool,title:f.default.func,footer:f.default.func,emptyText:f.default.oneOfType([f.default.node,f.default.func]),scroll:f.default.object,rowRef:f.default.func,getBodyWrapper:f.default.func,children:f.default.node,components:f.default.shape({table:f.default.any,header:f.default.shape({wrapper:f.default.any,row:f.default.any,cell:f.default.any}),body:f.default.shape({wrapper:f.default.any,row:f.default.any,cell:f.default.any})})},N.default.PropTypes),q.childContextTypes={table:f.default.any,components:f.default.any},q.defaultProps={data:[],useFixedHeader:!1,rowKey:\"key\",rowClassName:function(){return\"\"},onRow:function(){},onHeaderRow:function(){},prefixCls:\"rc-table\",bodyStyle:{},style:{},showHeader:!0,scroll:{},rowRef:function(){return null},emptyText:function(){return\"No Data\"}},exports.default=q;"},"hash":"468c4a4346b82421da8d3820e5489d6e"}