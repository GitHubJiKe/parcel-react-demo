{"dependencies":[{"name":"babel-runtime/helpers/extends","loc":{"line":1,"column":21}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":2,"column":28}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":3,"column":39}},{"name":"babel-runtime/helpers/inherits","loc":{"line":4,"column":22}},{"name":"react","loc":{"line":5,"column":33}},{"name":"prop-types","loc":{"line":6,"column":22}},{"name":"react-dom","loc":{"line":7,"column":21}},{"name":"classnames","loc":{"line":8,"column":23}},{"name":"rc-trigger","loc":{"line":9,"column":20}},{"name":"rc-tree","loc":{"line":10,"column":31}},{"name":"./util","loc":{"line":11,"column":94}},{"name":"rc-util/es/Children/toArray","loc":{"line":12,"column":20}}],"generated":{"js":"\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var t=require(\"babel-runtime/helpers/extends\"),r=e(t),n=require(\"babel-runtime/helpers/classCallCheck\"),o=e(n),i=require(\"babel-runtime/helpers/possibleConstructorReturn\"),a=e(i),p=require(\"babel-runtime/helpers/inherits\"),l=e(p),d=require(\"react\"),s=e(d),u=require(\"prop-types\"),c=e(u),f=require(\"react-dom\"),h=e(f),y=require(\"classnames\"),m=e(y),g=require(\"rc-trigger\"),x=e(g),C=require(\"rc-tree\"),b=e(C),N=require(\"./util\"),v=require(\"rc-util/es/Children/toArray\"),w=e(v),E={bottomLeft:{points:[\"tl\",\"bl\"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},topLeft:{points:[\"bl\",\"tl\"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}},k=function(e){function t(){var r,n,i;(0,o.default)(this,t);for(var p=arguments.length,l=Array(p),d=0;d<p;d++)l[d]=arguments[d];return r=n=(0,a.default)(this,e.call.apply(e,[this].concat(l))),n.state={_expandedKeys:[],fireOnExpand:!1,dropdownWidth:null},n.onExpand=function(e){n.setState({_expandedKeys:e,fireOnExpand:!0},function(){n.trigger&&n.trigger.forcePopupAlign&&n.trigger.forcePopupAlign()})},n.highlightTreeNode=function(e){var t=n.props,r=e.props[(0,N.labelCompatible)(t.treeNodeFilterProp)];return\"string\"==typeof r&&(t.inputValue&&r.indexOf(t.inputValue)>-1)},n.filterTreeNode=function(e,t){if(!e)return!0;var r=n.props.filterTreeNode;return!r||!t.props.disabled&&r.call(n,e,t)},i=r,(0,a.default)(n,i)}return(0,l.default)(t,e),t.prototype.componentDidMount=function(){this.setDropdownWidth()},t.prototype.componentWillReceiveProps=function(e){e.inputValue&&e.inputValue!==this.props.inputValue&&this.setState({_expandedKeys:[],fireOnExpand:!1})},t.prototype.componentDidUpdate=function(){this.setDropdownWidth()},t.prototype.setDropdownWidth=function(){var e=h.default.findDOMNode(this).offsetWidth;e!==this.state.dropdownWidth&&this.setState({dropdownWidth:e})},t.prototype.getPopupEleRefs=function(){return this.popupEle},t.prototype.getPopupDOMNode=function(){return this.trigger.getPopupDomNode()},t.prototype.getDropdownTransitionName=function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=this.getDropdownPrefixCls()+\"-\"+e.animation),t},t.prototype.getDropdownPrefixCls=function(){return this.props.prefixCls+\"-dropdown\"},t.prototype.processTreeNode=function(e){var t=this,r=[];this._expandedKeys=[],(0,N.loopAllChildren)(e,function(e,n,o){t.filterTreeNode(t.props.inputValue,e)&&(r.push(o),t._expandedKeys.push(e.key))});var n=[];r.forEach(function(e){e.split(\"-\").reduce(function(e,t){var r=e+\"-\"+t;return n.indexOf(r)<0&&n.push(r),r})});var o=[];(0,N.loopAllChildren)(e,function(e,t,r){n.indexOf(r)>-1&&o.push({node:e,pos:r})});return function e(t){return t.map(function(t){return t.children?s.default.cloneElement(t.node,{},e(t.children)):t.node})}((0,N.flatToHierarchy)(o))},t.prototype.renderTree=function(e,t,n,o){var i=this.props,a={multiple:o,prefixCls:i.prefixCls+\"-tree\",showIcon:i.treeIcon,showLine:i.treeLine,defaultExpandAll:i.treeDefaultExpandAll,defaultExpandedKeys:i.treeDefaultExpandedKeys,filterTreeNode:this.highlightTreeNode};return i.treeCheckable?(a.selectable=!1,a.checkable=i.treeCheckable,a.onCheck=i.onSelect,a.checkStrictly=i.treeCheckStrictly,i.inputValue?a.checkStrictly=!0:a._treeNodesStates=i._treeNodesStates,a.treeCheckStrictly&&t.length?a.checkedKeys={checked:e,halfChecked:t}:a.checkedKeys=e):(a.selectedKeys=e,a.onSelect=i.onSelect),a.defaultExpandAll||a.defaultExpandedKeys||i.loadData||(a.expandedKeys=e),a.autoExpandParent=!0,a.onExpand=this.onExpand,this._expandedKeys&&this._expandedKeys.length&&(a.expandedKeys=this._expandedKeys),this.state.fireOnExpand&&(a.expandedKeys=this.state._expandedKeys,a.autoExpandParent=!1),i.loadData&&(a.loadData=i.loadData),s.default.createElement(b.default,(0,r.default)({ref:(0,N.saveRef)(this,\"popupEle\")},a),n)},t.prototype.render=function(){var e,t=this.props,n=t.multiple,o=this.getDropdownPrefixCls(),i=(e={},e[t.dropdownClassName]=!!t.dropdownClassName,e[o+\"--\"+(n?\"multiple\":\"single\")]=1,e),a=t.visible,p=n||t.combobox||!t.showSearch?null:s.default.createElement(\"span\",{className:o+\"-search\"},t.inputElement),l=void 0;t._cachetreeData&&this.treeNodes?l=this.treeNodes:(l=function e(t){return(0,w.default)(t).map(function(t){return t?t&&t.props.children?s.default.createElement(C.TreeNode,(0,r.default)({},t.props,{key:t.key}),e(t.props.children)):s.default.createElement(C.TreeNode,(0,r.default)({},t.props,{key:t.key})):null})}(t.treeData||t.treeNodes),this.treeNodes=l),t.inputValue&&(l=this.processTreeNode(l));var d=[],u=[];(0,N.loopAllChildren)(l,function(e){t.value.some(function(t){return t.value===(0,N.getValuePropValue)(e)})&&d.push(e.key),t.halfCheckedValues&&t.halfCheckedValues.some(function(t){return t.value===(0,N.getValuePropValue)(e)})&&u.push(e.key)});var c=void 0;l.length||(t.notFoundContent?c=s.default.createElement(\"span\",{className:t.prefixCls+\"-not-found\"},t.notFoundContent):p||(a=!1));var f=s.default.createElement(\"div\",null,p,c||this.renderTree(d,u,l,n)),h=(0,r.default)({},t.dropdownStyle),y=t.dropdownMatchSelectWidth?\"width\":\"minWidth\";return this.state.dropdownWidth&&(h[y]=this.state.dropdownWidth+\"px\"),s.default.createElement(x.default,{action:t.disabled?[]:[\"click\"],ref:(0,N.saveRef)(this,\"trigger\"),popupPlacement:\"bottomLeft\",builtinPlacements:E,popupAlign:t.dropdownPopupAlign,prefixCls:o,popupTransitionName:this.getDropdownTransitionName(),onPopupVisibleChange:t.onDropdownVisibleChange,popup:f,popupVisible:a,getPopupContainer:t.getPopupContainer,popupClassName:(0,m.default)(i),popupStyle:h},this.props.children)},t}(d.Component);k.propTypes={dropdownMatchSelectWidth:c.default.bool,dropdownPopupAlign:c.default.object,visible:c.default.bool,filterTreeNode:c.default.any,treeNodes:c.default.any,inputValue:c.default.string,prefixCls:c.default.string,popupClassName:c.default.string,children:c.default.any},exports.default=k;"},"hash":"165f52dc3c401d802bb0d0b986fa730e"}