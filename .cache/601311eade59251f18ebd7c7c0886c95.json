{"dependencies":[{"name":"babel-runtime/helpers/extends","loc":{"line":1,"column":21}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":2,"column":28}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":3,"column":39}},{"name":"babel-runtime/helpers/inherits","loc":{"line":4,"column":22}},{"name":"react","loc":{"line":5,"column":18}},{"name":"prop-types","loc":{"line":6,"column":22}},{"name":"classnames","loc":{"line":7,"column":23}},{"name":"rc-editor-core","loc":{"line":8,"column":27}},{"name":"draft-js","loc":{"line":9,"column":78}},{"name":"../utils/createMention","loc":{"line":11,"column":26}},{"name":"../utils/exportContent","loc":{"line":12,"column":26}}],"generated":{"js":"\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var t=require(\"babel-runtime/helpers/extends\"),n=e(t),o=require(\"babel-runtime/helpers/classCallCheck\"),r=e(o),i=require(\"babel-runtime/helpers/possibleConstructorReturn\"),s=e(i),a=require(\"babel-runtime/helpers/inherits\"),l=e(a),u=require(\"react\"),d=e(u),c=require(\"prop-types\"),f=e(c),p=require(\"classnames\"),g=e(p),h=require(\"rc-editor-core\"),m=require(\"draft-js\"),C=require(\"../utils/createMention\"),S=e(C),y=require(\"../utils/exportContent\"),b=e(y),v=function(e){function t(n){(0,r.default)(this,t);var o=(0,s.default)(this,e.call(this,n));return o.onEditorChange=function(e){var t=e.getSelection();o._decorator=e.getDecorator();var n=e.getCurrentContent();o.props.onChange?o.setState({selection:t},function(){o.props.onChange(n,(0,b.default)(n))}):o.setState({editorState:e,selection:t})},o.onFocus=function(e){o.props.onFocus&&o.props.onFocus(e)},o.onBlur=function(e){o.props.onBlur&&o.props.onBlur(e)},o.reset=function(){o._editor.Reset()},o.mention=(0,S.default)({prefix:o.getPrefix(n),tag:n.tag,mode:n.mode,mentionStyle:n.mentionStyle}),o.Suggestions=o.mention.Suggestions,o.plugins=[o.mention],o.state={suggestions:n.suggestions,value:n.value&&m.EditorState.createWithContent(n.value,new m.CompositeDecorator(o.mention.decorators)),selection:m.SelectionState.createEmpty()},n.defaultValue,void 0!==n.value&&(o.controlledMode=!0),o}return(0,l.default)(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.suggestions,n=this.state.selection,o=e.value;o&&n&&(o=m.EditorState.acceptSelection(m.EditorState.createWithContent(o,this._decorator),n)),this.setState({suggestions:t,value:o})},t.prototype.getPrefix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return Array.isArray(e.prefix)?e.prefix:[e.prefix]},t.prototype.render=function(){var e,t=this,o=this.props,r=o.prefixCls,i=o.style,s=o.tag,a=o.multiLines,l=o.suggestionStyle,u=o.placeholder,c=o.defaultValue,f=o.className,p=o.notFoundContent,C=o.getSuggestionContainer,S=o.readOnly,y=o.disabled,b=o.placement,v=this.state.suggestions,x=this.Suggestions,q=(0,g.default)(f,(e={},e[r+\"-wrapper\"]=!0,e.readonly=S,e.disabled=y,e.multilines=a,e)),E=this.controlledMode?{value:this.state.value}:{},F=c&&m.EditorState.createWithContent(\"string\"==typeof c?m.ContentState.createFromText(c):c,this._decorator);return d.default.createElement(\"div\",{className:q,style:i,ref:function(e){return t._wrapper=e}},d.default.createElement(h.EditorCore,(0,n.default)({ref:function(e){return t._editor=e},prefixCls:r,style:i,multiLines:a,plugins:this.plugins,defaultValue:F,placeholder:u,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onEditorChange},E,{readOnly:S||y}),d.default.createElement(x,{mode:s?\"immutable\":\"mutable\",prefix:this.getPrefix(),prefixCls:r,style:l,placement:b,notFoundContent:p,suggestions:v,getSuggestionContainer:C?function(){return C(t._wrapper)}:null,onSearchChange:this.props.onSearchChange,onSelect:this.props.onSelect,noRedup:this.props.noRedup})))},t}(d.default.Component);v.propTypes={value:f.default.object,suggestions:f.default.array,prefix:f.default.oneOfType([f.default.string,f.default.arrayOf(f.default.string)]),prefixCls:f.default.string,tag:f.default.element,style:f.default.object,className:f.default.string,onSearchChange:f.default.func,onChange:f.default.func,mode:f.default.string,multiLines:f.default.bool,suggestionStyle:f.default.object,placeholder:f.default.string,defaultValue:f.default.object,notFoundContent:f.default.any,position:f.default.string,onFocus:f.default.func,onBlur:f.default.func,onSelect:f.default.func,getSuggestionContainer:f.default.func,noRedup:f.default.bool,mentionStyle:f.default.object,placement:f.default.string},v.controlledMode=!1,v.defaultProps={prefixCls:\"rc-editor-mention\",prefix:\"@\",mode:\"immutable\",suggestions:[],multiLines:!1,className:\"\",suggestionStyle:{},notFoundContent:\"无法找到\",position:\"absolute\",placement:\"bottom\",mentionStyle:{}},exports.default=v;"},"hash":"125034abbe26cefb62d8937b03f83bce"}