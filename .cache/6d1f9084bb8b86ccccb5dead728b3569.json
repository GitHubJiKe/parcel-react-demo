{"dependencies":[{"name":"babel-runtime/helpers/defineProperty","loc":{"line":1,"column":28}},{"name":"babel-runtime/helpers/extends","loc":{"line":2,"column":21}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":3,"column":28}},{"name":"babel-runtime/helpers/createClass","loc":{"line":4,"column":25}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":5,"column":39}},{"name":"babel-runtime/helpers/inherits","loc":{"line":6,"column":22}},{"name":"babel-runtime/helpers/typeof","loc":{"line":7,"column":20}},{"name":"react","loc":{"line":16,"column":23}},{"name":"react-dom","loc":{"line":17,"column":26}},{"name":"prop-types","loc":{"line":18,"column":22}},{"name":"rc-util/es/Dom/addEventListener","loc":{"line":19,"column":29}},{"name":"classnames","loc":{"line":20,"column":23}},{"name":"shallowequal","loc":{"line":21,"column":25}},{"name":"omit.js","loc":{"line":22,"column":17}},{"name":"../_util/getScroll","loc":{"line":23,"column":22}},{"name":"../_util/throttleByAnimationFrame","loc":{"line":24,"column":50}}],"generated":{"js":"\"use strict\";function e(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function t(e){return e&&e.__esModule?e:{default:e}}function i(e){return e!==window?e.getBoundingClientRect():{top:0,left:0,bottom:0}}function o(e,t){var o=e.getBoundingClientRect(),r=i(t),n=(0,A.default)(t,!0),l=(0,A.default)(t,!1),s=window.document.body,a=s.clientTop||0,f=s.clientLeft||0;return{top:o.top-r.top+n-a,left:o.left-r.left+l-f,width:o.width,height:o.height}}function r(){}function n(){return\"undefined\"!=typeof window?window:null}Object.defineProperty(exports,\"__esModule\",{value:!0});var l=require(\"babel-runtime/helpers/defineProperty\"),s=t(l),a=require(\"babel-runtime/helpers/extends\"),f=t(a),u=require(\"babel-runtime/helpers/classCallCheck\"),h=t(u),d=require(\"babel-runtime/helpers/createClass\"),p=t(d),c=require(\"babel-runtime/helpers/possibleConstructorReturn\"),v=t(c),y=require(\"babel-runtime/helpers/inherits\"),m=t(y),g=require(\"babel-runtime/helpers/typeof\"),b=t(g),w=require(\"react\"),x=e(w),S=require(\"react-dom\"),q=e(S),P=require(\"prop-types\"),E=t(P),_=require(\"rc-util/es/Dom/addEventListener\"),C=t(_),k=require(\"classnames\"),T=t(k),L=require(\"shallowequal\"),O=t(L),H=require(\"omit.js\"),R=t(H),j=require(\"../_util/getScroll\"),A=t(j),B=require(\"../_util/throttleByAnimationFrame\"),N=function(e,t,i,o){var r,n=arguments.length,l=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if(\"object\"===(\"undefined\"==typeof Reflect?\"undefined\":(0,b.default)(Reflect))&&\"function\"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(l=(n<3?r(l):n>3?r(t,i,l):r(t,i))||l);return n>3&&l&&Object.defineProperty(t,i,l),l},D=function(e){function t(){(0,h.default)(this,t);var e=(0,v.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.events=[\"resize\",\"scroll\",\"touchstart\",\"touchmove\",\"touchend\",\"pageshow\",\"load\"],e.eventHandlers={},e.state={affixStyle:void 0,placeholderStyle:void 0},e.saveFixedNode=function(t){e.fixedNode=t},e}return(0,m.default)(t,e),(0,p.default)(t,[{key:\"setAffixStyle\",value:function(e,t){var i=this,o=this.props,l=o.onChange,s=void 0===l?r:l,a=o.target,f=void 0===a?n:a,u=this.state.affixStyle,h=f()===window;\"scroll\"===e.type&&u&&t&&h||(0,O.default)(t,u)||this.setState({affixStyle:t},function(){var e=!!i.state.affixStyle;(t&&!u||!t&&u)&&s(e)})}},{key:\"setPlaceholderStyle\",value:function(e){var t=this.state.placeholderStyle;(0,O.default)(e,t)||this.setState({placeholderStyle:e})}},{key:\"updatePosition\",value:function(e){var t=this.props,r=t.offsetTop,l=t.offsetBottom,s=t.offset,a=t.target,u=(void 0===a?n:a)();r=r||s;var h=(0,A.default)(u,!0),d=q.findDOMNode(this),p=o(d,u),c={width:this.fixedNode.offsetWidth,height:this.fixedNode.offsetHeight},v={top:!1,bottom:!1};\"number\"!=typeof r&&\"number\"!=typeof l?(v.top=!0,r=0):(v.top=\"number\"==typeof r,v.bottom=\"number\"==typeof l);var y=i(u),m=u.innerHeight||u.clientHeight;if(h>p.top-r&&v.top){var g=p.width,b=y.top+r;this.setAffixStyle(e,{position:\"fixed\",top:b,left:y.left+p.left,maxHeight:\"calc(100vh - \"+b+\"px)\",width:g}),this.setPlaceholderStyle({width:g,height:c.height})}else if(h<p.top+c.height+l-m&&v.bottom){var w=u===window?0:window.innerHeight-y.bottom,x=p.width;this.setAffixStyle(e,{position:\"fixed\",bottom:w+l,left:y.left+p.left,width:x}),this.setPlaceholderStyle({width:x,height:p.height})}else{var S=this.state.affixStyle;\"resize\"===e.type&&S&&\"fixed\"===S.position&&d.offsetWidth?this.setAffixStyle(e,(0,f.default)({},S,{width:d.offsetWidth})):this.setAffixStyle(e,null),this.setPlaceholderStyle(null)}}},{key:\"componentDidMount\",value:function(){var e=this,t=this.props.target||n;this.timeout=setTimeout(function(){e.setTargetEventListeners(t)})}},{key:\"componentWillReceiveProps\",value:function(e){this.props.target!==e.target&&(this.clearEventListeners(),this.setTargetEventListeners(e.target),this.updatePosition({}))}},{key:\"componentWillUnmount\",value:function(){this.clearEventListeners(),clearTimeout(this.timeout),this.updatePosition.cancel()}},{key:\"setTargetEventListeners\",value:function(e){var t=this,i=e();i&&(this.clearEventListeners(),this.events.forEach(function(e){t.eventHandlers[e]=(0,C.default)(i,e,t.updatePosition)}))}},{key:\"clearEventListeners\",value:function(){var e=this;this.events.forEach(function(t){var i=e.eventHandlers[t];i&&i.remove&&i.remove()})}},{key:\"render\",value:function(){var e=(0,T.default)((0,s.default)({},this.props.prefixCls||\"ant-affix\",this.state.affixStyle)),t=(0,R.default)(this.props,[\"prefixCls\",\"offsetTop\",\"offsetBottom\",\"target\",\"onChange\"]),i=(0,f.default)({},this.state.placeholderStyle,this.props.style);return x.createElement(\"div\",(0,f.default)({},t,{style:i}),x.createElement(\"div\",{className:e,ref:this.saveFixedNode,style:this.state.affixStyle},this.props.children))}}]),t}(x.Component);exports.default=D,D.propTypes={offsetTop:E.default.number,offsetBottom:E.default.number,target:E.default.func},N([(0,B.throttleByAnimationFrameDecorator)()],D.prototype,\"updatePosition\",null);"},"hash":"37f6ea1fc61d3ba4407b625a4fd4d439"}