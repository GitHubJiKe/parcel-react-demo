{"dependencies":[{"name":"babel-runtime/helpers/extends","loc":{"line":1,"column":21}},{"name":"react","loc":{"line":2,"column":18}},{"name":"react-dom","loc":{"line":3,"column":21}},{"name":"prop-types","loc":{"line":4,"column":22}},{"name":"create-react-class","loc":{"line":5,"column":29}},{"name":"rc-trigger","loc":{"line":6,"column":20}},{"name":"rc-util/es/KeyCode","loc":{"line":7,"column":20}},{"name":"classnames","loc":{"line":8,"column":23}},{"name":"./SubPopupMenu","loc":{"line":9,"column":25}},{"name":"./placements","loc":{"line":10,"column":23}},{"name":"./util","loc":{"line":11,"column":45}}],"generated":{"js":"\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var t=require(\"babel-runtime/helpers/extends\"),n=e(t),i=require(\"react\"),u=e(i),s=require(\"react-dom\"),o=e(s),r=require(\"prop-types\"),a=e(r),l=require(\"create-react-class\"),c=e(l),p=require(\"rc-trigger\"),d=e(p),f=require(\"rc-util/es/KeyCode\"),h=e(f),v=require(\"classnames\"),m=e(v),M=require(\"./SubPopupMenu\"),b=e(M),y=require(\"./placements\"),g=e(y),T=require(\"./util\"),C=0,S={horizontal:\"bottomLeft\",vertical:\"rightTop\",\"vertical-left\":\"rightTop\",\"vertical-right\":\"leftTop\"},L=(0,c.default)({displayName:\"SubMenu\",propTypes:{parentMenu:a.default.object,title:a.default.node,children:a.default.any,selectedKeys:a.default.array,openKeys:a.default.array,onClick:a.default.func,onOpenChange:a.default.func,rootPrefixCls:a.default.string,eventKey:a.default.string,multiple:a.default.bool,active:a.default.bool,onItemHover:a.default.func,onSelect:a.default.func,triggerSubMenuAction:a.default.string,onDeselect:a.default.func,onDestroy:a.default.func,onMouseEnter:a.default.func,onMouseLeave:a.default.func,onTitleMouseEnter:a.default.func,onTitleMouseLeave:a.default.func,onTitleClick:a.default.func},isRootMenu:!1,getDefaultProps:function(){return{onMouseEnter:T.noop,onMouseLeave:T.noop,onTitleMouseEnter:T.noop,onTitleMouseLeave:T.noop,onTitleClick:T.noop,title:\"\"}},getInitialState:function(){return this.isSubMenu=1,{defaultActiveFirst:!1}},componentDidMount:function(){this.componentDidUpdate()},componentDidUpdate:function(){var e=this,t=this.props,n=t.mode,i=t.parentMenu;\"horizontal\"===n&&i.isRootMenu&&this.isOpen()&&setTimeout(function(){if(e.subMenuTitle&&e.menuInstance){var t=o.default.findDOMNode(e.menuInstance);t.offsetWidth>=e.subMenuTitle.offsetWidth||(t.style.minWidth=e.subMenuTitle.offsetWidth+\"px\")}},0)},componentWillUnmount:function(){var e=this.props,t=e.onDestroy,n=e.eventKey,i=e.parentMenu;t&&t(n),i.subMenuInstance===this&&this.clearSubMenuTimers()},onDestroy:function(e){this.props.onDestroy(e)},onKeyDown:function(e){var t=e.keyCode,n=this.menuInstance,i=this.isOpen();if(t===h.default.ENTER)return this.onTitleClick(e),this.setState({defaultActiveFirst:!0}),!0;if(t===h.default.RIGHT)return i?n.onKeyDown(e):(this.triggerOpenChange(!0),this.setState({defaultActiveFirst:!0})),!0;if(t===h.default.LEFT){var u=void 0;if(!i)return;return(u=n.onKeyDown(e))||(this.triggerOpenChange(!1),u=!0),u}return!i||t!==h.default.UP&&t!==h.default.DOWN?void 0:n.onKeyDown(e)},onOpenChange:function(e){this.props.onOpenChange(e)},onPopupVisibleChange:function(e){this.triggerOpenChange(e,e?\"mouseenter\":\"mouseleave\")},onMouseEnter:function(e){var t=this.props,n=t.eventKey,i=t.onMouseEnter;this.clearSubMenuLeaveTimer(),this.setState({defaultActiveFirst:!1}),i({key:n,domEvent:e})},onMouseLeave:function(e){var t=this.props,n=t.parentMenu,i=t.eventKey,u=t.onMouseLeave;n.subMenuInstance=this,n.subMenuLeaveFn=function(){u({key:i,domEvent:e})},n.subMenuLeaveTimer=setTimeout(n.subMenuLeaveFn,100)},onTitleMouseEnter:function(e){var t=this.props,n=t.eventKey,i=t.onItemHover,u=t.onTitleMouseEnter;this.clearSubMenuTitleLeaveTimer(),i({key:n,hover:!0}),u({key:n,domEvent:e})},onTitleMouseLeave:function(e){var t=this.props,n=t.parentMenu,i=t.eventKey,u=t.onItemHover,s=t.onTitleMouseLeave;n.subMenuInstance=this,n.subMenuTitleLeaveFn=function(){u({key:i,hover:!1}),s({key:i,domEvent:e})},n.subMenuTitleLeaveTimer=setTimeout(n.subMenuTitleLeaveFn,100)},onTitleClick:function(e){var t=this.props;t.onTitleClick({key:t.eventKey,domEvent:e}),\"hover\"!==t.triggerSubMenuAction&&(this.triggerOpenChange(!this.isOpen(),\"click\"),this.setState({defaultActiveFirst:!1}))},onSubMenuClick:function(e){this.props.onClick(this.addKeyPath(e))},onSelect:function(e){this.props.onSelect(e)},onDeselect:function(e){this.props.onDeselect(e)},getPrefixCls:function(){return this.props.rootPrefixCls+\"-submenu\"},getActiveClassName:function(){return this.getPrefixCls()+\"-active\"},getDisabledClassName:function(){return this.getPrefixCls()+\"-disabled\"},getSelectedClassName:function(){return this.getPrefixCls()+\"-selected\"},getOpenClassName:function(){return this.props.rootPrefixCls+\"-submenu-open\"},saveMenuInstance:function(e){this.menuInstance=e},addKeyPath:function(e){return(0,n.default)({},e,{keyPath:(e.keyPath||[]).concat(this.props.eventKey)})},triggerOpenChange:function(e,t){var n=this.props.eventKey;this.onOpenChange({key:n,item:this,trigger:t,open:e})},clearSubMenuTimers:function(){this.clearSubMenuLeaveTimer(),this.clearSubMenuTitleLeaveTimer()},clearSubMenuTitleLeaveTimer:function(){var e=this.props.parentMenu;e.subMenuTitleLeaveTimer&&(clearTimeout(e.subMenuTitleLeaveTimer),e.subMenuTitleLeaveTimer=null,e.subMenuTitleLeaveFn=null)},clearSubMenuLeaveTimer:function(){var e=this.props.parentMenu;e.subMenuLeaveTimer&&(clearTimeout(e.subMenuLeaveTimer),e.subMenuLeaveTimer=null,e.subMenuLeaveFn=null)},isChildrenSelected:function(){var e={find:!1};return(0,T.loopMenuItemRecusively)(this.props.children,this.props.selectedKeys,e),e.find},isOpen:function(){return-1!==this.props.openKeys.indexOf(this.props.eventKey)},renderChildren:function(e){var t=this.props,n={mode:\"horizontal\"===t.mode?\"vertical\":t.mode,visible:this.isOpen(),level:t.level+1,inlineIndent:t.inlineIndent,focusable:!1,onClick:this.onSubMenuClick,onSelect:this.onSelect,onDeselect:this.onDeselect,onDestroy:this.onDestroy,selectedKeys:t.selectedKeys,eventKey:t.eventKey+\"-menu-\",openKeys:t.openKeys,openTransitionName:t.openTransitionName,openAnimation:t.openAnimation,onOpenChange:this.onOpenChange,subMenuOpenDelay:t.subMenuOpenDelay,subMenuCloseDelay:t.subMenuCloseDelay,forceSubMenuRender:t.forceSubMenuRender,triggerSubMenuAction:t.triggerSubMenuAction,defaultActiveFirst:this.state.defaultActiveFirst,multiple:t.multiple,prefixCls:t.rootPrefixCls,id:this._menuId,ref:this.saveMenuInstance};return u.default.createElement(b.default,n,e)},saveSubMenuTitle:function(e){this.subMenuTitle=e},render:function(){var e,t=this.props,i=this.isOpen(),s=this.getPrefixCls(),o=\"inline\"===t.mode,r=(0,m.default)(s,s+\"-\"+t.mode,(e={},e[t.className]=!!t.className,e[this.getOpenClassName()]=i,e[this.getActiveClassName()]=t.active||i&&!o,e[this.getDisabledClassName()]=t.disabled,e[this.getSelectedClassName()]=this.isChildrenSelected(),e));this._menuId||(t.eventKey?this._menuId=t.eventKey+\"$Menu\":this._menuId=\"$__$\"+ ++C+\"$Menu\");var a={},l={},c={};t.disabled||(a={onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter},l={onClick:this.onTitleClick},c={onMouseEnter:this.onTitleMouseEnter,onMouseLeave:this.onTitleMouseLeave});var p={};o&&(p.paddingLeft=t.inlineIndent*t.level);var f=u.default.createElement(\"div\",(0,n.default)({ref:this.saveSubMenuTitle,style:p,className:s+\"-title\"},c,l,{\"aria-expanded\":i,\"aria-owns\":this._menuId,\"aria-haspopup\":\"true\",title:\"string\"==typeof t.title?t.title:void 0}),t.title,u.default.createElement(\"i\",{className:s+\"-arrow\"})),h=this.renderChildren(t.children),v=t.parentMenu.isRootMenu?t.parentMenu.props.getPopupContainer:function(e){return e.parentNode},M=S[t.mode],b=\"inline\"===t.mode?\"\":t.popupClassName;return u.default.createElement(\"li\",(0,n.default)({},a,{className:r,style:t.style}),o&&f,o&&h,!o&&u.default.createElement(d.default,{prefixCls:s,popupClassName:s+\"-popup \"+b,getPopupContainer:v,builtinPlacements:g.default,popupPlacement:M,popupVisible:i,popup:h,action:t.disabled?[]:[t.triggerSubMenuAction],mouseEnterDelay:t.subMenuOpenDelay,mouseLeaveDelay:t.subMenuCloseDelay,onPopupVisibleChange:this.onPopupVisibleChange,forceRender:t.forceSubMenuRender},f))}});L.isSubMenu=1,exports.default=L;"},"hash":"10a1d2de5fceb2f59402d5437b5ac570"}